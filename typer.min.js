function typer(e,n){function t(e){var n=Object.prototype.toString.call(e);return n=n.split(" ")[1],n.substr(0,n.length-1)}function r(){b.dataNum=Math.floor(999999999*Math.random()+1),e.setAttribute("data-typer",b.dataNum)}function i(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}function o(e,n){var t=document.styleSheets[0];"insertRule"in t?t.insertRule(e+"{"+n+"}",1):t.addRule(e,n)}function c(e,n,r,i){var o={html:r===!1?!1:i===!1?!1:!0};if("Number"===t(r)&&(o.speed=r),"Number"===t(i)&&(o.speed=i),"Object"===t(n)){var c=Object.keys(n)[0];n=document.querySelector(n[c])[o.html?"innerHTML":"textContent"].trim()}return o[e]=n,o}function u(){return b.item>=0||(b.item=0),b.item===b.length?document.body.removeEventListener("killTyper",b.kill):(b.ks||(b.ks=!0,document.body.addEventListener("killTyper",b.kill)),b.cursor||(b.cursor="cursor-soft"),void(b.type=setInterval(function(){var e=b[b.item];e.line?a(e):e["continue"]?s(e):e.pause?d(e):e.emit?v(e):e.listen?m(e):e.back?f(e):e.empty?p():e.run?h(e):e.end&&y(e)},0)))}function l(e){var t;t=e.line?e.line:e["continue"];var r=[b.newDiv],i=0;b.iterator=setInterval(function(){if(i===t.length)return clearInterval(b.iterator),b.item++,u();var n=t[i];if(e.html){if("<"===n&&"/"!==t[i+1]){for(var o="",c="",l=i;l<t.length&&(o+=t[l],">"!==t[l]&&"<"!==t[l]&&(c+=t[l]),">"!==t[l]);l++);var a=b.voids.some(function(e){return e===c});if(a)r[0].innerHTML+=o;else{var s=document.createElement("div");s.innerHTML=o;var d=r[0];r.unshift(s.firstChild),d.appendChild(s.firstChild)}return i+=o.length}if("<"===n&&"/"===t[i+1])return r.shift(),i=t.indexOf(">",i)+1;if("&"===n){for(var v="",l=i;l<t.length&&(v+=t[l],";"!==t[l]);l++);var s=document.createElement("div");s.innerHTML=v,1===s.textContent.length?(r[0].innerHTML+=v,i=l):r[0].innerHTML+=n}else r[0].innerHTML+=n}else{if("string"!=typeof t){var s=document.createElement("div");s.textContent=n,n=s.innerHTML}b.newDiv.innerHTML+=n}i++},e.speed||n)}function a(n){clearInterval(b.type),b.newDiv&&(["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"].map(function(e){b.newDiv.classList.remove(e)}),b.newDiv.classList.add("white-space"),""===b.newDiv.innerHTML&&(b.newDiv.innerHTML=" "));var t=document.createElement("div");return t.setAttribute("data-typer-child",b.dataNum),t.className=b.cursor,t.classList.add("typer"),t.classList.add("white-space"),e.appendChild(t),b.newDiv=t,1===n.line?(b.item++,u()):void l(n)}function s(e){clearInterval(b.type),l(e)}function d(e){clearInterval(b.type),b.pause=setTimeout(function(){b.item++,u()},e.pause)}function v(e){clearInterval(b.type),document.querySelector(e.el).dispatchEvent(CustomEvent(e.emit)),b.item++,u()}function m(e){clearInterval(b.type);var n=document.querySelector(e.el);n.addEventListener(e.listen,function t(e){n.removeEventListener(e.type,t),b.killed||(b.item++,u())})}function f(e){function t(e){var n=[].slice.call(e.children);n.map(function(n,r){n.innerHTML.length?n.children.length&&(t(n),this[r].innerHTML.length||(this[r].remove?this[r].remove():this[r].removeNode(),o=e.innerHTML.split(""),c=o.length-1)):(n.remove?n.remove():n.removeNode(),e===b.newDiv&&(o=e.innerHTML.split(""),c=o.length-1))},n)}if(clearInterval(b.type),!b.newDiv.textContent)return b.item++,u();if(e.speed=e.speed||1,"empty"===e.back)return b.newDiv.innerHTML="",b.item++,u();if(e.back>b.newDiv.innerHTML.length&&(e.back="all"),"all"===e.back&&(e.back=b.newDiv.textContent.length),e.back<0){var r=b.newDiv.textContent;e.back=r.substring(-1*e.back,r.length).length}var i=0,o=b.newDiv.innerHTML.split(""),c=o.length-1;b.goBack=setInterval(function(){if(i++,">"===o[c])for(var n=[],r=c;r>=0;r--){if(n.unshift(o[r]),"<"===o[r]&&"/"===o[r+1]){if(n.length=0,">"===o[r-1])continue;c=r-1;break}if("<"===o[r]){var l=n.slice(1,n.length-1).join(""),a=b.voids.some(function(e){return e===l});if(c=r-1,a&&o.splice(r,n.length),n.length=0,">"===o[r-1])continue;break}}if(";"===o[c]){for(var s=[],d=c;d>=0&&(s.unshift(o[d]),"&"!==o[d]);d--);var v=document.createElement("div");v.innerHTML=s.join(""),1===v.textContent.length?(c=d-1,o.splice(d,s.length)):(o.splice(c,1),c--),b.newDiv.innerHTML=o.join("")}else o.splice(c,1),b.newDiv.innerHTML=o.join(""),c--;i===e.back&&(clearInterval(b.goBack),t(b.newDiv),b.item++,u())},e.speed||n)}function p(){b.newDiv="",e.innerHTML="",a({line:1})}function h(n){clearInterval(b.type),n.run(e),b.item++,u()}function y(){clearInterval(b.type),b.cb()}var b=[];if(b.voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],n=n||70,"String"!==t(e))throw"typer error: selector provided is not a string.";document.styleSheets.length||i(),e=document.querySelector(e),function(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}e.prototype=window.Event.prototype,window.CustomEvent=e}(),r();var g={cursor:function(e){if(b.cursorRan)return console.log('You can only call ".cursor" once.'),this;if(b.cursorRan=!0,void 0===e&&(e=!0),e===!1)return b.cursor="no-cursor",this;var n=[],t='[data-typer="'+b.dataNum+'"]';return e.color&&o(t+" .typer::after","background-color:"+e.color),"hard"===e.blink?n.push("cursor-hard"):n.push("cursor-soft"),e.block===!0&&n.push("cursor-block"),b.cursor=n.join(" "),this},line:function(e,n,t){return e?b.push(c("line",e,n,t)):b.push({line:1}),b.typing||(b.typing=!0,u()),this},"continue":function(e,n,t){return e?(b.push(c("continue",e,n,t)),this):this},pause:function(e){return b.push({pause:e||500}),this},emit:function(e,n){return n||(n="body"),document.querySelector(n),b.push({emit:e,el:n}),this},listen:function(e,n){return n||(n="body"),document.querySelector(n),b.push({listen:e,el:n}),this},back:function(e,n){return b.push({back:e,speed:n}),this},empty:function(){return b.push({empty:!0}),this},run:function(e){return b.push({run:e}),this},end:function(n,r){function i(){return console.log('WARNING: you tried to call a method after ".end" has already been called.'),o}b.push({end:!0}),b.cb=function(){["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"].map(function(e){b.newDiv.classList.remove(e)}),b.newDiv.classList.add("white-space"),b.newDiv="",n&&n instanceof Function&&n(e),(n&&"Boolean"===t(n)||r)&&(r instanceof Function&&r(e),document.body.dispatchEvent(CustomEvent("typerFinished")))};var o={cursor:function(){return i()},line:function(){return i()},"continue":function(){return i()},pause:function(){return i()},emit:function(){return i()},listen:function(){return i()},back:function(){return i()},empty:function(){return i()},run:function(){return i()},end:function(){return i()}};return o}};return b.kill=function(e){if(document.body.removeEventListener(e.type,b.kill),b.killed=!0,clearInterval(b.iterator),clearInterval(b.goBack),clearTimeout(b.pause),b.item===b.length)return console.log("This typer has completed; removing listener.");var n=b[b.item];n&&n.listen&&n.el.dispatchEvent(new CustomEvent(n.listen)),console.log("Typer killed!")},g}